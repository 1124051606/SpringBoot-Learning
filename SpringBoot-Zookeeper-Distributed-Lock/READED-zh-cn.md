## 什么是分布式锁  
顾名思义，分布式锁肯定是用在分布式环境下。在分布式环境下，使用分布式锁的目的也是保证同一时刻只有一个线程来修改共享变量，修改共享缓存……。

前景：    
jdk提供的锁只能保证线程间的安全性，但分布式环境下，各节点之间的线程同步执行却得不到保障，分布式锁由此诞生。  

实现方式有以下几种：  
1. 基于数据库实现分布式锁； 
1. 基于缓存（Redis等）实现分布式锁； 
1. 基于Zookeeper实现分布式锁；


本示例利用zookeeper实现分布式锁。   
#### 使用Zookeeper实现分布式锁的优点    
有效的解决单点问题，不可重入问题，非阻塞问题以及锁无法释放的问题。实现起来较为简单。  

#### 使用Zookeeper实现分布式锁的缺点  
性能上不如使用缓存实现分布式锁。因为需要频繁的创建删除节点。并且需要对ZK的原理有所了解。  
三种方案的比较   
上面几种方式，哪种方式都无法做到完美。就像CAP一样，在复杂性、可靠性、性能等方面无法同时满足，所以，根据不同的应用场景选择最适合自己的才是王道。  

从理解的难易程度角度（从低到高）  
数据库 > 缓存 > Zookeeper

从实现的复杂性角度（从低到高）  
Zookeeper >= 缓存 > 数据库

从性能角度（从高到低）  
缓存 > Zookeeper >= 数据库

从可靠性角度（从高到低）  
Zookeeper > 缓存 > 数据库  

参考链接：  
[三种方案实现分布式锁](http://www.hollischuang.com/archives/1716)